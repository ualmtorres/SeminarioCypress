<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.8.dev">
<meta name="author" content="Servicio de las Tecnologías de la Información y las Comunicaciones - Universidad de Almería">
<title>Testing de frontend con Cypress (tutorial en curso)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-right">
<div id="header">
<h1>Testing de frontend con Cypress (tutorial en curso)</h1>
<div class="details">
<span id="author" class="author">Servicio de las Tecnologías de la Información y las Comunicaciones - Universidad de Almería</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Tabla de contenidos</div>
<ul class="sectlevel1">
<li><a href="#trueresumen">Resumen</a></li>
<li><a href="#trueintroducción">1. Introducción</a></li>
<li><a href="#truecypress">2. Cypress</a>
<ul class="sectlevel2">
<li><a href="#truecomponentes-de-cypress">2.1. Componentes de Cypress</a></li>
<li><a href="#trueconociendo-la-sintaxis">2.2. Conociendo la sintaxis</a></li>
<li><a href="#truecomandos-chainers-y-aserciones">2.3. Comandos, <em>chainers</em> y aserciones</a></li>
<li><a href="#trueinstalación-de-cypress">2.4. Instalación de Cypress</a></li>
<li><a href="#trueel-primer-test-de-ejemplo">2.5. El primer test de ejemplo</a></li>
<li><a href="#trueuso-de-fixtures">2.6. Uso de <em>fixtures</em></a>
<ul class="sectlevel3">
<li><a href="#truefixture-en-test-individual">2.6.1. Fixture en test individual</a></li>
<li><a href="#truefixture-inicializado-para-la-suite">2.6.2. Fixture inicializado para la suite</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#truesorry-cypress">3. Sorry Cypress</a></li>
<li><a href="#trueanexo-i-visual-testing">Anexo I. Visual Testing</a></li>
<li><a href="#trueanexo-ii-mochawesome">Anexo II. Mochawesome</a></li>
<li><a href="#trueanexo-iii-tests-en-gitlab-ci">Anexo III. Tests en GitLab CI</a></li>
<li><a href="#truereferencias">Referencias</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="./images/logocloudstic.png" alt="logocloudstic">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueresumen"><a class="anchor" href="#trueresumen"></a>Resumen</h2>
<div class="sectionbody">
<div class="paragraph">
<p>xxx</p>
</div>
<div class="ulist">
<div class="title">Objetivos</div>
<ul>
<li>
<p>xxx</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Disponibles los repositorios usados en este tutorial.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>xxx</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueintroducción"><a class="anchor" href="#trueintroducción"></a>1. Introducción</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En el tutorial <a href="https://ualmtorres.github.io/SeminarioTesting">Testing de APIs NestJS</a> hemos visto cómo crear pruebas unitarias y de integración con Jest. Estos tests permiten que confiemos en una parte de la aplicación (clase del dominio, controlador o servicio). Estos tests se centran en la ejecución en un entorno de testing controlado. Pero ¿cómo funciona la aplicación desde el punto de vista del usuario? Nos podemos plantear colocar una persona a modo de <em>tester</em> o podemos optar por tratar de programar los tests que respresentan la interacción de un usuario y comprobar que se comporta como se espera. Si además creamos una suite de tests, se podrán ejecutar de forma automática al implementar nuevas funcionalidades y al subir nuevo código al repositorio.</p>
</div>
<div class="paragraph">
<p>A diferencia de lso tests unitarios y de integración vistos en el tutorial <a href="https://ualmtorres.github.io/SeminarioTesting">Testing de APIs NestJS</a>, que prueban la aplicación desde el código, el testing e2e prueba el software desde la interfaz de usuario. El testing e2e (end-to-end) simula la interacción de un usuario real en escenarios o flujos de trabajo en una aplicación de usuario final. El testing e2e está orientado a detectar posibles problemas que pueden encontrar los usuario al interactuar con la aplcación. Para ello, el motor de testing lanza un navegador y lo controla de forma remota interactuando con él como si fuera un usuario. Luego, los tests hacen comprobaciones. ¿Está el contenido que se espera? ¿Ha cambiado la URL?</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Los tests unitarios y de integración suelen ser rápidos pero no garantizan que tengamos una aplicación funcionando. Por contra, los tests end-to-end son más lentos pero están orientados a probar la aplicación como un todo.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>El proceso de testing e2e suele seguir este flujo:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Iniciar aplicación</p>
</li>
<li>
<p>Login</p>
</li>
<li>
<p>Ir a una ruta específica de la aplicación</p>
</li>
<li>
<p>Trabajar con formularios y controles interactuando con la aplicación</p>
</li>
<li>
<p>Validar el resultado</p>
</li>
<li>
<p>Volver al paso 3</p>
</li>
</ol>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Entornos de ejecucion del backend</div>
<div class="paragraph">
<p>Los tests e2e requieren de un entorno lo más parecido al entorno real de producción. Para ello necesitamos disponer de diferentes entornos de backend (desarrollo, pruebas y producción). En el entorno de pruebas la base de datos será poblada con datos de prueba al inicio del proceso de testing o al inicio de cada test. Incluso puede haber una configuración global inicial y otra en cada test, dependiendo de la situación. <strong>La base de datos de pruebas debe ser lo más parecida posible a la de producción</strong></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truecypress"><a class="anchor" href="#truecypress"></a>2. Cypress</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En este tutorial nos centraremos en <a href="https://www.cypress.io/">Cypress</a>. Cypress es una herramienta de testing de frontend que nos permite simular la interacción del usuario con una aplicación de usuario final. Fue creado originalmente para testing e2e de cualquier cosa que se ejecutara en un navegador, simulando las acciones de un usuario en la aplicación. No obstante, Cypress también puede realizar llamadas HTTP (y admite mocking), por lo que también se puede usar pasar testing de APIs. Cypress ofrece un IDE para lanzar y ver el resultado de las pruebas.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Si tienes experiencia en testing de frontend, conocerás <a href="https://www.selenium.dev/">Selenium</a>. En tal caso, Cypress es una evolución y una herramienta más avanzada que Selenium. Cypress incluye funcionalidades interesantes de mocking, espía y modificación de funciones, testing entre varios navegadores y tamaños de dispositivos.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Los tests de Cypress se integran en el proceso de desarrollo incluyéndose en la propia base de código del proyecto junto al resto de tests (unitarios, integración, &#8230;&#8203;). Esto lo hace muy interesante para incluir sus tests en el proceso de CI/CD. Además, como el tiempo de ejecución de los tests e2e es bastante mayor que el de los tests unitarios, conviene ejecutarlos en un servidor aparte.</p>
</div>
<div class="sect2">
<h3 id="truecomponentes-de-cypress"><a class="anchor" href="#truecomponentes-de-cypress"></a>2.1. Componentes de Cypress</h3>
<div class="paragraph">
<p>Cypress es muy sencillo de instalar (simplemente con <code>npm</code> o <code>yarn</code>) y viene con todo lo necesario. Se instala y funciona. Cypress consta de dos componentes: <em>Test Runner</em> y <em>Dashboard</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>El <em>Test Runner</em> visita rutas específicas de una aplicación y ejecuta los tests. Se puede instalar mediante <code>npm</code>/<code>yarn</code> o como un paquete del sistema operativo (disponible para MacOS, Linux y Windows). Cypress Test Runner ofrece una lista de navegadores compatibles con el ordenador en el que está instalado y permite seleccionar cualquiera de ellos para ejecutar los tests. El IDE de Cypress levanta un navegador y lo controla de forma remota para ejecutar los tests. Además, Cypress graba la ejecución de los tests, lo que es útil para poder verlo en diferido. Esto es especialmente útil cuando se usa el test runner en un entorno de CI/CD en modo headless/consola ya que se generará un video con todo el proceso de testing. El video se puede consultar después desde el otro componente, <em>Dashboard</em>. También se guardan imágenes con las capturas de pantalla de los tests fallidos.</p>
</li>
<li>
<p>El <em>Dashboard</em> permite la ejecución remota de tests, integración en un sistema CI/CD (gracias a que permite ejecutar los tests en modo consola sin tener un navegador) y permite la grabación de los resultados de tests (resultado de cada test, imágenes con las capturas de pantalla de los resultados e incluso un video con la captura completa de la ejecución del proceso de testing). Existen dos servicios para ello:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.cypress.io/guides/dashboard/introduction#Features">Cypress Dashboard</a> es un servicio SaaS de Cypress en modo de pago por uso y dispone de una suscripción gratuita limitada. (<a href="https://dashboard.cypress.io/projects/vu8avj/runs?branches=%5B%5D&amp;committers=%5B%5D&amp;flaky=%5B%5D&amp;page=1&amp;status=%5B%5D&amp;tags=%5B%5D&amp;timeRange=%7B%22startDate%22%3A%221970-01-01%22%2C%22endDate%22%3A%222038-01-19%22%7D">Proyecto de ejemplo</a>)</p>
</li>
<li>
<p><a href="https://github.com/sorry-cypress/sorry-cypress">Sorry Cypress</a> es una iniciativa open source que permite tener un servicio propio de Dashboard para Cypress. Sorry Cypress también tiene una modalidad en modo SaaS mas económica que Cypress Dashboard. (<a href="https://sorry-cypress-demo.herokuapp.com/">Proyectos de ejemplo</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Actualmente Cypress soporta los navegadores Chrome, Microsoft Edge, Firefox y Electron. No soporta Safari, Edge antiguos ni Internet Explorer. Cuando se lanza el test runner se ejecuta en una aplicación Electron.</p>
</div>
</div>
<div class="sect2">
<h3 id="trueconociendo-la-sintaxis"><a class="anchor" href="#trueconociendo-la-sintaxis"></a>2.2. Conociendo la sintaxis</h3>
<div class="paragraph">
<p>A continuación se muestra un extracto de un ejemplo extraído de la documentación oficial. Los tests en Cypress se organizan como en Jest, por lo que si conoces el tutorial <a href="https://ualmtorres.github.io/SeminarioTesting">Testing de APIs NestJS</a>, aprender Cypress te resultará un proceso bastante asequible. Dentro de <code>describe</code> podemos usar bloques <code>beforeEach, afterEach, beforeAll</code> y <code>afterAll</code> como hacíamos en Jest.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="ts" class="language-ts hljs">...
describe('Post Resource', () =&gt; {
  it('Creating a New Post', () =&gt; {
    cy.visit('/posts/new')  <i class="conum" data-value="1"></i><b>(1)</b>

    cy.get('input.post-title') <i class="conum" data-value="2"></i><b>(2)</b>
      .type('My First Post') <i class="conum" data-value="3"></i><b>(3)</b>

    cy.get('input.post-body') <i class="conum" data-value="4"></i><b>(4)</b>
      .type('Hello, world!') <i class="conum" data-value="5"></i><b>(5)</b>

    cy.contains('Submit') <i class="conum" data-value="6"></i><b>(6)</b>
      .click() <i class="conum" data-value="7"></i><b>(7)</b>

    cy.url() <i class="conum" data-value="8"></i><b>(8)</b>
      .should('include', '/posts/my-first-post')

    cy.get('h1') <i class="conum" data-value="9"></i><b>(9)</b>
      .should('contain', 'My First Post')
  })
})
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Visitar la ruta <code>/posts/new</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Buscar el <code>&lt;input&gt;</code> con clase <code>post-title</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Escribir <code>My First Post</code> en ese elemento</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Buscar el <code>&lt;input&gt;</code> con la clase <code>post-body</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Escribir <code>Hello, world!</code> en ese elemento</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Buscar el elemento que contenga el texto <code>Submit</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Pulsarlo</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Obtener la URL del navegador y comprobar que incluye <code>/posts/my-first-post</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Buscar la etiqueta <code>h1</code> y comprobar que tiene el texto <code>My First Post</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Hablando del ejemplo, el objeto <code>cy</code> da acceso a la <a href="https://docs.cypress.io/api/table-of-contents">API de Cypress</a>. Se pueden usar una gran variedad de comandos para navegar, interactuar y validar la aplicación. Además, algunos comandos como <code>visit, get</code> o <code>contains</code> esperan y lo vuelven a intentar tras unos instantes si la ejecución falla debido a que los elementos DOM no estén disponibles aún.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Con Cypress no hay que esperar a que los elementos de la interfaz estén actualizados o contengan los datos esperados. De forma predeterminada Cypress espera a que los elementos estén disponibles antes de interactuar con ellos.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Comandos básicos</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Comando</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>visit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ir a la ruta indicada</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Buscar elementos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>contains</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comprobar si el texto indicado está disponible en la página</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Introducir el texto en el campo de texto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>click</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hacer clic en el elemento DOM</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>También se pueden añadir comandos personalizados. El ejemplo siguiente muestra cómo implementar un método para login de forma que pueda ser usado en cualquier test que sea necesario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="ts" class="language-ts hljs">Cypress.Commands.add('login', () =&gt; { 1&gt;
    cy.visit('/login');
    cy.get('input[name=email]').type('foo@bar.com');
    cy.get('input[name=password]').type('password');
    cy.get('form').submit();
});
...
cy.login(); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Creación de un comando <code>login</code> para hacer el login a la aplicación</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Uso del comando`login` desde cualquier otro lugar</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="truecomandos-chainers-y-aserciones"><a class="anchor" href="#truecomandos-chainers-y-aserciones"></a>2.3. Comandos, <em>chainers</em> y aserciones</h3>
<div class="paragraph">
<p>En el ejemplo anterior de <code>Post Resource</code> hemos ejecutado los comandos <code>visit</code>, <code>get</code>, <code>contains</code>, y <code>url</code>. Todos ellos devuelven un <em>chainer</em> de Cypress, es decir, un wrapper sobre el valor u objeto (normalmente un elemento DOM) que devuelven los comandos. Los <em>chainers</em> tienen métodos (p.e. <code>should</code>) para poder realizar aserciones.</p>
</div>
<div class="paragraph">
<p>Respecto a los comandos, indicar que hay comandos de varios tipos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Para controlar el navegador:</p>
<div class="ulist">
<ul>
<li>
<p><code>cy.visit()</code> para ir a la URL que se le pase como parámetro.</p>
</li>
<li>
<p><code>cy.reload()</code> para recargar la página.</p>
</li>
<li>
<p><code>cy.go()</code> para ir hacia atrás (<code>back</code>) o hacia adelante (<code>forward</code>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Para seleccionar elementos:</p>
<div class="ulist">
<ul>
<li>
<p><code>cy.get()</code> selecciona elementos DOM mediante selectores al estilo jQuery.</p>
</li>
<li>
<p><code>cy.find()</code> obtiene los descendientes DOM de un selector</p>
</li>
<li>
<p><code>cy.contains()</code> obtiene el elemento DOM que tiene el texto que se le pasa como parámetro.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Para interactuar con los elementos:</p>
<div class="ulist">
<ul>
<li>
<p><code>click()</code> hace clic sobre un elemento.</p>
</li>
<li>
<p><code>dblclick()</code> hace doble clic sobre un elemento.</p>
</li>
<li>
<p><code>rightclick()</code> hace clic con el botón derecho sobre un elemento.</p>
</li>
<li>
<p><code>clear()</code> borra el contenido de un elemento (p.e. un cuadro de texto).</p>
</li>
<li>
<p><code>type()</code> escribe el texto que se pase como argumento en un elemento (p.e. un cuadro de texto o un textarea). También se usa para introducir combinaciones de teclas (p.e. <code>{shift+alt+b}</code>).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Respecto a las aserciones, Cypress usa la librería de aserciones <a href="https://www.chaijs.com/">Chai</a> que permite expresar las aserciones de una forma muy legible.
## Hola mundo</p>
</div>
</div>
<div class="sect2">
<h3 id="trueinstalación-de-cypress"><a class="anchor" href="#trueinstalación-de-cypress"></a>2.4. Instalación de Cypress</h3>
<div class="paragraph">
<p>Desde la carpeta del proyecto, ejecutamos en la terminal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ ng add @cypress/schematic</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto hará lo siguiente:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Añadirá las dependencia de Cypress a <code>package.json</code>.</p>
</li>
<li>
<p>Añadirá entradas en <code>package.json</code> para ejecutar los tests (p.e. <code>npm cypress open</code>, <code>npm cypress run</code>).</p>
</li>
<li>
<p>Hará que Cypress sea la herramienta de testing predeterminada del proyecto.</p>
</li>
<li>
<p>Añadirá un archivo de configuración <code>cypress.json</code> con las carpeta de los componentes de Cypress y la URL base de la aplicación.</p>
</li>
<li>
<p>creará una carpeta <code>cypress</code> en el proyecto con 4 subcarpetas: <code>fixtures</code>, <code>integration</code>, <code>plugins</code> y <code>support</code>.</p>
<div class="ulist">
<ul>
<li>
<p>En <code>fixtures</code> se guardan datos en JSON para realizar las pruebas (p.e. los datos de login). Podemos pensar que es una carpeta para guardar archivos de variables y mocks. <em>Esta carpeta se crea realmente al ejecutar los tests por primera vez.</em></p>
</li>
<li>
<p>En <code>integrations</code> se guardan los tests e2e.</p>
</li>
<li>
<p>En <code>plugins</code> se configuran los plugins que queramos usar con Cypress (p.e. Mochawesome)</p>
</li>
<li>
<p>En <code>support</code> guardamos los comandos personalizados (p.e, un comando para login) e incluiremos todo lo que queramos ejecutar antes de ejecutar el testing.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>El archivo <code>support/index.js</code> se procesa de forma automática antes de ejecutar los tests. Es un buen lugar para colocar configuración y comportamientos globales.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="trueel-primer-test-de-ejemplo"><a class="anchor" href="#trueel-primer-test-de-ejemplo"></a>2.5. El primer test de ejemplo</h3>
<div class="paragraph">
<p>Para abrir el Test runner ejecutamos</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ npm run cypress:open</code></pre>
</div>
</div>
<div class="paragraph">
<p>o</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ ng e2e</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Si tenemos la aplicación corriendo, se nos pedirá si queremos ejecutar los tests en otro puerto. En este tutorial se está desarrollando sin tener la aplicación en ejecución.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La instalación de Cypress incluye un test de ejemplo en <code>cypress/integration/spec.ts</code>. Aquí se muestra:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="ts" class="language-ts hljs">describe('My First Test', () =&gt; {
  it('Visits the initial project page', () =&gt; {
    cy.visit('/');
    cy.contains('Welcome')
    cy.contains('sandbox app is running!')
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Al ejecutar los tests aparecerá Cypress con los archivos de test disponibles. En este caso aparece sólo el archivo <code>spec.ts</code> de ejemplo.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/test-runner.png" alt="test runner">
</div>
</div>
<div class="paragraph">
<p>Al pulsar sobre el archivo o sobre <code>Run 1 integration spec</code> el test runner inicia un navegador y visita la URL de la aplicación. En el IDE Cypress tenemos el <code>Selector Playground</code> (el icono que parece un punto de mira). Permite seleccionar cualquier componente de la interfaz y proporciona el código que hay pegar en el test para interactuar con ese componente. Esta primera ejecución del test fallará porque el test de ejemplo busca los textos <code>Welcome</code> y <code>sandbox app is running!</code> en la página de inicio y no está disponible.</p>
</div>
<div class="paragraph">
<p>Para ejecutar los tests sin abrir el IDE ejecutamos el comando siguiente, pero tiendo en cuenta que para ejecutar tests sin abrir el IDE, la aplicación tiene que estar en ejecución:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ npx cypress run</code></pre>
</div>
</div>
<div class="paragraph">
<p>El resultado de los tests se muestra en la consola. Sin embargo, es posible ofrecer una salida más elaborada. Esto se realiza usando <em>reporters</em>. En el el <a href="#trueanexo-ii-mochawesome">Anexo II. Mochawesome</a> se explica cómo usar <em>Mochawesome</em> como reporter de los tests e2e de Cypress. La figura siguiente ilustra un resultado de testing usando <em>Mochawesome</em> como reporter.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/mochawesome.png" alt="mochawesome">
</div>
</div>
<div class="paragraph">
<p>Tras el fallo, pulsar en el elemento de log de la izquierda para obtener más información del error o ver snapshot del DOM asociado al comando. Para más información, consultar la <a href="https://docs.cypress.io/guides/core-concepts/test-runner">documentación oficial del Test runner</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="trueuso-de-fixtures"><a class="anchor" href="#trueuso-de-fixtures"></a>2.6. Uso de <em>fixtures</em></h3>
<div class="paragraph">
<p>Los <em>fixtures</em> (accesorios) son archivos JSON definidos en archivos individuales. Se almacenan en la carpeta <code>cypress/fixtures</code>. Para usar un <em>fixture</em> le asignaremos un alias.</p>
</div>
<div class="paragraph">
<p>A modo de ejemplo crearemos un <em>fixture</em> en <code>cypress/fixtures/users.json</code> para usuarios.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">[
  {
    "id": 1,
    "name": "Leanne Graham",
    "username": "Bret",
    "email": "Sincere@april.biz"
  },
  {
    "id": 2,
    "name": "Ervin Howell",
    "username": "Antonette",
    "email": "Shanna@melissa.tv"
  },
  {
    "id": 3,
    "name": "Clementine Bauch",
    "username": "Samantha",
    "email": "Nathan@yesenia.net"
  },
  {
    "id": 4,
    "name": "Patricia Lebsack",
    "username": "Karianne",
    "email": "Julianne.OConner@kory.org"
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para usarlos tenemos dos opciones: usarlos en un test individual o usarlos en desde cualquier test de la suite inicializándolos previamente en los métodos <code>before</code> o <code>beforeEach</code>. Veamos un ejemplo de cada uno.</p>
</div>
<div class="sect3">
<h4 id="truefixture-en-test-individual"><a class="anchor" href="#truefixture-en-test-individual"></a>2.6.1. Fixture en test individual</h4>
<div class="paragraph">
<p>El fixture lo cargamos mediante una función de flecha y lo usamos dentro.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="ts" class="language-ts hljs">  it('Prints a user from user fixture initialized in the test', () =&gt; {
    cy.fixture('users.json').then((users) =&gt; { <i class="conum" data-value="1"></i><b>(1)</b>
      cy.log('First user name: ', users[0].name); <i class="conum" data-value="2"></i><b>(2)</b>
    });
  });</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Carga del fixture en una variable <code>users</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Acceso a la variable <code>users</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La figura siguiente ilustra el resultado de la ejecución de este test.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/fixture-in-test.png" alt="fixture in test">
</div>
</div>
</div>
<div class="sect3">
<h4 id="truefixture-inicializado-para-la-suite"><a class="anchor" href="#truefixture-inicializado-para-la-suite"></a>2.6.2. Fixture inicializado para la suite</h4>
<div class="paragraph">
<p>Se trata de declarar una variable accesible desde toda la suite e inicializarla con el fixture en el método <code>before</code> o <code>beforeEach</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="ts" class="language-ts hljs">  let theUsers: any; <i class="conum" data-value="1"></i><b>(1)</b>

  before(() =&gt; { <i class="conum" data-value="2"></i><b>(2)</b>
    cy.fixture('users').then((users) =&gt; {<i class="conum" data-value="3"></i><b>(3)</b>
      theUsers = users; <i class="conum" data-value="4"></i><b>(4)</b>
    });
  });
...
  it('Prints a user from user fixture initialized in before method', () =&gt; {
    cy.log('First user name: ', theUsers[0].name); <i class="conum" data-value="5"></i><b>(5)</b>
  });
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declaración de la variable en la que cargaremos el fixture</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Método de inicialización para toda la suite</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Función de flecha para carga del fixture</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Inicialización de la variable con el fixture</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Acceso a la variable que tiene el fixture</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La figura siguiente ilustra el resultado de la ejecución de este test.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/fixture-in-before.png" alt="fixture in before">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truesorry-cypress"><a class="anchor" href="#truesorry-cypress"></a>3. Sorry Cypress</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Docker-compose: <a href="https://raw.githubusercontent.com/sorry-cypress/sorry-cypress/master/docker-compose.full.yml" class="bare">https://raw.githubusercontent.com/sorry-cypress/sorry-cypress/master/docker-compose.full.yml</a></p>
</li>
<li>
<p>npm install cy2 cypress</p>
</li>
<li>
<p>Dar de alta el proyecto en localhost:1234. Usar ese id en el cypress.json del proyecto (en <code>projectId</code>).</p>
</li>
<li>
<p>export CYPRESS_API_URL="http://localhost:1234/"</p>
</li>
<li>
<p>./node_modules/cy2/bin/cy2 run --record --key secret --parallel --ci-build-id <code>date +%s</code></p>
</li>
<li>
<p>./node_modules/cy2/bin/cy2 run --record --key secret --parallel --ci-build-id "sip 0.2"</p>
</li>
<li>
<p>Hay que añadir 127.0.0.1 storage en /etc/hosts para que suba los videos</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueanexo-i-visual-testing"><a class="anchor" href="#trueanexo-i-visual-testing"></a>Anexo I. Visual Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A veces es necesario probar en un flujo de trabajo de pruebas el estado visual de un componente. Por ejemplo, se quiere probar si está visible o no un componente. Incluso pueden crearse tests para comprobar el tamaño, color y estilo de los componentes. Por supuesto, se pueden crear tests y comprobar el estado visual de los elementos DOM. Esto deriva en tests complejos. Sin embargo, hay una forma mejor de abordar este proceso de testing. Se trata de crear unos snapshots de los componentes o de la aplicación y compararlos con los snapshots de referencia.</p>
</div>
<div class="paragraph">
<p>Consultar <a href="https://www.thinktecture.com/en/angular/e2e-tests-with-cypress-and-angular/#cypress-in-action">post en Thinktecture</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueanexo-ii-mochawesome"><a class="anchor" href="#trueanexo-ii-mochawesome"></a>Anexo II. Mochawesome</h2>
<div class="sectionbody">
<div class="paragraph">
<p>De forma predeterminada, el resultado de los tests se muestra por la consola. Posteriormente, los resultados no se pueden consultar. Por tanto, para obtener información sobre cómo fueron ciertos tests, o hacer cambios en la aplicación atendiendo a los tests que indicaron un error, habría que volver a pasar los tests. Esto, dependiendo de la cantidad de tests a pasar puede ser demasiado tiempo de espera. Para solucionar este problema se usa otro <em>reporter</em>. Los reporters guardarán sus resultados en archivos que luego podremos abrir para recuperar el resultado de los tests. <a href="https://github.com/adamgruber/mochawesome#readme">Mochawesome</a> genera un archivo JSON. Con la herramienta <code>marge</code> generaremos un HTML interactivo con el resultado de los tests (del archivo JSON).</p>
</div>
<div class="paragraph">
<p>Para configurar Mochawesome, instalaremos el generador de informes a nivel global y el reporter para Cypress en el proyecto. Para ello, ejecutareos en la terminal los comandos siguientes :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ npm install -g mochawesome-report-generator
$ npm install --save-dev cypress-mochawesome-reporter</code></pre>
</div>
</div>
<div class="paragraph">
<p>Después, añadir lo siguiente a <code>cypress/support/index.ts</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="ts" class="language-ts hljs">import 'cypress-mochawesome-reporter/register';</code></pre>
</div>
</div>
<div class="paragraph">
<p>A continuación, modificar <code>cypress/plugins/index.ts</code> para que quede así:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="ts" class="language-ts hljs">...
module.exports = (on, config) =&gt; {
  require('cypress-mochawesome-reporter/plugin')(on); <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Añadimos esta línea</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Añadimos esto a <code>cypress.json</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">...
  "reporter": "mochawesome",
  "reporterOptions": {
    "reportDir": "cypress/results",
    "overwrite": false,
    "html": false,
    "json": true
  }
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ahora lanzamos los tests con el comando siguiente, recordando que la aplicación tiene que estar en ejecución porque <code>run</code> ejecuta los tests en modo <em>headless</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="ts" class="language-ts hljs">$ npx cypress run</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto genera un archivo <code>results/mochawesome.json</code>.</p>
</div>
<div class="paragraph">
<p>Ahora toca generar el HTML con <code>marge</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ npx marge cypress/results/mochawesome.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los resultados elaborados de Mochawesome se enviarán a la carpeta <code>mochawesome-report</code>. Finalmente, si abrimos el archivo <code>mochawesome.html</code> veremos los resultados del testing al estilo de <em>Mochawesome</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/mochawesome.png" alt="mochawesome">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueanexo-iii-tests-en-gitlab-ci"><a class="anchor" href="#trueanexo-iii-tests-en-gitlab-ci"></a>Anexo III. Tests en GitLab CI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para ejecutar los tests de Cypress en GitLab CI basta con usar la imagen Cypress. A continuación se muestra un ejemplo de un <code>.gitlab-ci.yml</code> básico.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yml" class="language-yml hljs">image: cypress/base:10
cypress-e2e:
  script:
    - npm install
    - $(npm bin)/cypress run
  artifacts:
    expire_in: 1 week
    paths:
    - cypress/screenshots
    - cypress/videos</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para más información, consultar el <a href="https://gitlab.com/cypress-io/cypress-example-docker-gitlab">repositorio del ejemplo de Docker para GitLab</a>.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Consultar la <a href="https://docs.cypress.io/examples/examples/docker#Examples">página de ejemplos de Docker</a> de Cypress. Contiene enlaces para ejecutar tests Cypress en GitLab, Circle CI y para ejecutar Cypress en Docker y Docker Compose.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truereferencias"><a class="anchor" href="#truereferencias"></a>Referencias</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.thinktecture.com/en/angular/e2e-tests-with-cypress-and-angular">End-to-End Testing of Angular Components with Cypress</a></p>
</li>
<li>
<p><a href="https://madewithlove.com/blog/software-engineering/cypress-or-how-i-learned-to-stop-worrying-and-love-e2e/">Cypress or how I learned to stop worrying and love E2E</a></p>
</li>
<li>
<p><a href="http://antontelesh.github.io/testing/2019/02/04/mochawesome-merge.html">Integrating Mochawesome reporter with Cypress</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-12-04 12:23:26 +0100
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>